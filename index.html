<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>SHEEPLY PERFECT TIMING</title>

<style>
html,body{
  margin:0;height:100%;background:#070707;color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto
}
.app{
  position:relative;
  width:100%;height:100%;
  overflow:hidden;
}
canvas{position:absolute;inset:0}
.hud{
  position:absolute;top:16px;left:0;right:0;
  display:flex;justify-content:center;gap:18px;
  z-index:10;font-weight:700;letter-spacing:.5px
}
.hud span{opacity:.8}
.overlay{
  position:absolute;inset:0;
  display:grid;place-items:center;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(10px);
  z-index:20
}
.btn{
  padding:14px 28px;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:#fff;
  font-weight:900;
  letter-spacing:1px;
}
.flash{
  position:absolute;inset:0;
  background:#fff;
  opacity:0;
  pointer-events:none;
}
</style>
</head>

<body>
<div class="app">
  <canvas id="c"></canvas>

  <div class="hud">
    <span id="score">0</span>
    <span id="combo">×0</span>
  </div>

  <div class="overlay" id="ov">
    <button class="btn" id="play">PLAY</button>
  </div>

  <div class="flash" id="flash"></div>
</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
const flash = document.getElementById("flash");

let W,H,dpr;
function resize(){
  dpr=Math.min(2,devicePixelRatio||1);
  W=innerWidth*dpr;
  H=innerHeight*dpr;
  canvas.width=W;canvas.height=H;
  canvas.style.width=innerWidth+"px";
  canvas.style.height=innerHeight+"px";
}
addEventListener("resize",resize);resize();

let running=false;
let angle=0;
let speed=0.035;
let score=0;
let combo=0;

const ringR= Math.min(W,H)*0.25;
const zoneSize=0.35; // radians

const scoreEl=document.getElementById("score");
const comboEl=document.getElementById("combo");

function start(){
  running=true;
  angle=0;
  speed=0.035;
  score=0;
  combo=0;
  document.getElementById("ov").style.display="none";
}

document.getElementById("play").onclick=start;

canvas.addEventListener("pointerdown",()=>{
  if(!running) return;

  const diff = Math.abs(Math.PI*1.5 - (angle%(Math.PI*2)));
  if(diff < zoneSize){
    // PERFECT
    combo++;
    const bonus = Math.max(10, Math.floor((zoneSize-diff)*120));
    score += bonus * combo;
    speed += 0.003;
    flash.style.opacity=0.25;
    setTimeout(()=>flash.style.opacity=0,80);
  }else{
    // FAIL
    combo=0;
    speed=Math.max(0.03,speed-0.01);
  }
});

function draw(){
  ctx.clearRect(0,0,W,H);

  const cx=W/2, cy=H/2;

  // ring
  ctx.lineWidth=6*dpr;
  ctx.strokeStyle="rgba(255,255,255,.25)";
  ctx.beginPath();
  ctx.arc(cx,cy,ringR,0,Math.PI*2);
  ctx.stroke();

  // perfect zone
  ctx.strokeStyle="rgba(255,255,255,.8)";
  ctx.beginPath();
  ctx.arc(cx,cy,ringR,Math.PI*1.5-zoneSize,Math.PI*1.5+zoneSize);
  ctx.stroke();

  // dot
  const x=cx+Math.cos(angle)*ringR;
  const y=cy+Math.sin(angle)*ringR;
  ctx.fillStyle="#fff";
  ctx.beginPath();
  ctx.arc(x,y,6*dpr,0,Math.PI*2);
  ctx.fill();

  scoreEl.textContent=score;
  comboEl.textContent="×"+combo;
}

function loop(){
  if(running){
    angle+=speed;
    draw();
  }
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
